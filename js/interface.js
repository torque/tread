// Generated by CoffeeScript 1.4.0

document.ondrop = function() {
  return false;
};

document.ondragover = function() {
  return false;
};

Zepto(function($) {
  return document.getElementById('body').ondrop = function(ev) {
    var fr, start;
    fr = new FileReader();
    start = 0;
    fr.onload = function(ev) {
      $('.start').remove();
      $('.filecell').remove();
      start = new Date();
      return document.title = 'Loading...';
    };
    fr.onloadend = function(ev) {
      var file, files, rendered, torrent, _i, _len, _results;
      torrent = bdecode(ev.target.result)[0];
      files = Backend.organizeFiles(torrent);
      document.title = torrent.info.name;
      console.log("Torrent parsed in " + (new Date() - start) + "ms.");
      _results = [];
      for (_i = 0, _len = files.length; _i < _len; _i++) {
        file = files[_i];
        rendered = ich.filelist({
          files: file
        });
        _results.push($("#drop").append(rendered));
      }
      return _results;
    };
    fr.readAsBinaryString(ev.dataTransfer.files[0]);
    return false;
  };
});
